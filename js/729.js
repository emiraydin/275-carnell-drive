/*!For license information please see 729.js.LICENSE.txt*/(self.webpackChunkmp_webgl=self.webpackChunkmp_webgl||[]).push([[729],{34515:t=>{var i=Object.prototype.toString;t.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===i.call(t.buffer)||Array.isArray(t)}},14176:t=>{t.exports=function(t,i){return"number"==typeof t?t:"number"==typeof i?i:0}},2823:t=>{t.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},48738:t=>{function i(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(i(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&i(t.slice(0,0))}(t)||!!t._isBuffer)}},73134:(t,i,e)=>{var h=e(12739),s=e(47529),r=e(14176),n=["x","e","a","o","n","s","r","c","u","m","v","w","z"],a=["m","w"],o=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],d="\t".charCodeAt(0),c=" ".charCodeAt(0);function g(t){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(t)}function u(t){return function(){return this["_"+t]}}function l(t,i){if(!t.chars||0===t.chars.length)return null;var e=f(t.chars,i);return e>=0?t.chars[e]:null}function p(t,i,e){if(!t.kernings||0===t.kernings.length)return 0;for(var h=t.kernings,s=0;s<h.length;s++){var r=h[s];if(r.first===i&&r.second===e)return r.amount}return 0}function f(t,i,e){for(var h=e=e||0;h<t.length;h++)if(t[h].id===i)return h;return-1}t.exports=function(t){return new g(t)},g.prototype.update=function(t){if(t=s({measure:this._measure},t),this._opt=t,this._opt.tabSize=r(this._opt.tabSize,4),!t.font)throw new Error("must provide a valid bitmap font");var i=this.glyphs,e=t.text||"",a=t.font;this._setupSpaceGlyphs(a);var d=h.lines(e,t);i.length=0;var c=d.reduce((function(t,i){return Math.max(t,i.width,0)}),0),g=0,u=0,l=r(t.lineHeight,a.common.lineHeight),w=a.common.base,y=l-w,x=t.letterSpacing||0,b=l*d.length-y,m=function(t){if("center"===t)return 1;if("right"===t)return 2;return 0}(this._opt.align);u-=b,this._width=c,this._height=b,this._descender=l-w,this._baseline=w,this._xHeight=function(t){for(var i=0;i<n.length;i++){var e=n[i].charCodeAt(0),h=f(t.chars,e);if(h>=0)return t.chars[h].height}return 0}(a),this._capHeight=function(t){for(var i=0;i<o.length;i++){var e=o[i].charCodeAt(0),h=f(t.chars,e);if(h>=0)return t.chars[h].height}return 0}(a),this._lineHeight=l,this._ascender=l-y-this._xHeight;var _=this;d.forEach((function(t,h){for(var s,r=t.start,n=t.end,o=t.width,d=r;d<n;d++){var f=e.charCodeAt(d),w=_.getGlyph(a,f);if(w){s&&(g+=p(a,s.id,w.id));var y=g;1===m?y+=(c-o)/2:2===m&&(y+=c-o),i.push({position:[y,u],data:w,index:d,line:h}),g+=w.xadvance+x,s=w}}u+=l,g=0})),this._linesTotal=d.length},g.prototype._setupSpaceGlyphs=function(t){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,t.chars&&0!==t.chars.length){var i=l(t,c)||function(t){for(var i=0;i<a.length;i++){var e=a[i].charCodeAt(0),h=f(t.chars,e);if(h>=0)return t.chars[h]}return 0}(t)||t.chars[0],e=this._opt.tabSize*i.xadvance;this._fallbackSpaceGlyph=i,this._fallbackTabGlyph=s(i,{x:0,y:0,xadvance:e,id:d,xoffset:0,yoffset:0,width:0,height:0})}},g.prototype.getGlyph=function(t,i){var e=l(t,i);return e||(i===d?this._fallbackTabGlyph:i===c?this._fallbackSpaceGlyph:null)},g.prototype.computeMetrics=function(t,i,e,h){var s,r=this._opt.letterSpacing||0,n=this._opt.font,a=0,o=0,d=0;if(!n.chars||0===n.chars.length)return{start:i,end:i,width:0};e=Math.min(t.length,e);for(var c=i;c<e;c++){var g,u=t.charCodeAt(c);if(g=this.getGlyph(n,u)){g.xoffset;var l=(a+=s?p(n,s.id,g.id):0)+g.xadvance+r,f=a+g.width;if(f>=h||l>=h)break;a=l,o=f,s=g}d++}return s&&(o+=s.xoffset),{start:i,end:i+d,width:o}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach((function(t){Object.defineProperty(g.prototype,t,{get:u(t),configurable:!0})}))},77824:(t,i,e)=>{var h=e(2823),s=e(34515),r=e(48738),n=[0,2,3],a=[2,1,3];t.exports=function(t,i){t&&(s(t)||r(t))||(i=t||{},t=null);for(var e="string"==typeof(i="number"==typeof i?{count:i}:i||{}).type?i.type:"uint16",o="number"==typeof i.count?i.count:1,d=i.start||0,c=!1!==i.clockwise?n:a,g=c[0],u=c[1],l=c[2],p=6*o,f=t||new(h(e))(p),w=0,y=0;w<p;w+=6,y+=4){var x=w+d;f[x+0]=y+0,f[x+1]=y+1,f[x+2]=y+2,f[x+3]=y+g,f[x+4]=y+u,f[x+5]=y+l}return f}},45837:(t,i,e)=>{"use strict";e.d(i,{Y:()=>c});var h=e(73134),s=e.n(h),r=e(77824),n=e.n(r);const a={min:[0,0],max:[0,0]};function o(t){const i=t.length/2;a.min[0]=t[0],a.min[1]=t[1],a.max[0]=t[0],a.max[1]=t[1];for(let e=0;e<i;e++){const i=t[2*e+0],h=t[2*e+1];a.min[0]=Math.min(i,a.min[0]),a.min[1]=Math.min(h,a.min[1]),a.max[0]=Math.max(i,a.max[0]),a.max[1]=Math.max(h,a.max[1])}}var d=e(81396);function c(t){return new g(t)}class g extends d.BufferGeometry{constructor(t){super(),this.type="TextGeometry","string"==typeof t&&(t={text:t}),this._opt=Object.assign({},t),t&&this.update(t)}update(t){if("string"==typeof t&&(t={text:t}),!(t=Object.assign({},this._opt,t)).font)throw new TypeError("must specify a { font } in options");this.layout=s()(t);const i=!1!==t.flipY,e=t.font,h=e.common.scaleW,r=e.common.scaleH,a=this.layout.glyphs.filter((function(t){const i=t.data;return i.width*i.height>0}));this.visibleGlyphs=a;const o=function(t){const i=new Float32Array(4*t.length*2);let e=0;return t.forEach((function(t){const h=t.data,s=t.position[0]+h.xoffset,r=t.position[1]+h.yoffset,n=h.width,a=h.height;i[e++]=s,i[e++]=r,i[e++]=s,i[e++]=r+a,i[e++]=s+n,i[e++]=r+a,i[e++]=s+n,i[e++]=r})),i}(a),c=function(t,i,e,h){const s=new Float32Array(4*t.length*2);let r=0;return t.forEach((function(t){const n=t.data,a=n.x+n.width,o=n.y+n.height,d=n.x/i;let c=n.y/e;const g=a/i;let u=o/e;h&&(c=(e-n.y)/e,u=(e-o)/e),s[r++]=d,s[r++]=c,s[r++]=d,s[r++]=u,s[r++]=g,s[r++]=u,s[r++]=g,s[r++]=c})),s}(a,h,r,i),g=n()([],{clockwise:!0,type:"uint16",count:a.length});this.setIndex(g),this.setAttribute("position",new d.BufferAttribute(o,2)),this.setAttribute("uv",new d.BufferAttribute(c,2)),!t.multipage&&"page"in this.attributes?this.deleteAttribute("page"):t.multipage&&this.setAttribute("page",new d.BufferAttribute(function(t){const i=new Float32Array(4*t.length*1);let e=0;return t.forEach((function(t){var h=t.data.page||0;i[e++]=h,i[e++]=h,i[e++]=h,i[e++]=h})),i}(a),1))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new d.Sphere);const t=this.attributes.position.array,i=this.attributes.position.itemSize;if(!t||!i||t.length<2)return this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0);!function(t,i){o(t);const e=a.min[0],h=a.min[1],s=a.max[0]-e,r=a.max[1]-h,n=Math.sqrt(s*s+r*r);i.center.set(e+s/2,h+r/2,0),i.radius=n/2}(t,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error('BufferGeometry.computeBoundingSphere():\nComputed radius is NaN. The\n"position" attribute is likely to have NaN values.')}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new d.Box3);const t=this.boundingBox,i=this.attributes.position.array,e=this.attributes.position.itemSize;!i||!e||i.length<2?t.makeEmpty():function(t,i){o(t),i.min.set(a.min[0],a.min[1],0),i.max.set(a.max[0],a.max[1],0)}(i,t)}}},12739:t=>{var i=/\n/,e="\n",h=/\s/;function s(t,i,e,h){var s=t.indexOf(i,e);return-1===s||s>h?h:s}function r(t){return h.test(t)}function n(t,i,e,h){return{start:i,end:i+Math.min(h,e-i)}}t.exports=function(i,e){return t.exports.lines(i,e).map((function(t){return i.substring(t.start,t.end)})).join("\n")},t.exports.lines=function(t,h){if(0===(h=h||{}).width&&"nowrap"!==h.mode)return[];t=t||"";var a="number"==typeof h.width?h.width:Number.MAX_VALUE,o=Math.max(0,h.start||0),d="number"==typeof h.end?h.end:t.length,c=h.mode,g=h.measure||n;return"pre"===c?function(t,e,h,s,r){for(var n=[],a=h,o=h;o<s&&o<e.length;o++){var d=e.charAt(o),c=i.test(d);if(c||o===s-1){var g=t(e,a,c?o:o+1,r);n.push(g),a=o+1}}return n}(g,t,o,d,a):function(t,i,h,n,a,o){var d=[],c=a;"nowrap"===o&&(c=Number.MAX_VALUE);for(;h<n&&h<i.length;){for(var g=s(i,e,h,n);h<g&&r(i.charAt(h));)h++;var u=t(i,h,g,c),l=h+(u.end-u.start),p=l+e.length;if(l<g){for(;l>h&&!r(i.charAt(l));)l--;if(l===h)p>h+e.length&&p--,l=p;else for(p=l;l>h&&r(i.charAt(l-e.length));)l--}if(l>=h){var f=t(i,h,l,c);d.push(f)}h=p}return d}(g,t,o,d,a,c)}},47529:t=>{t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var h=arguments[e];for(var s in h)i.call(h,s)&&(t[s]=h[s])}return t};var i=Object.prototype.hasOwnProperty},60668:(t,i,e)=>{"use strict";e.d(i,{cC:()=>d});class h{constructor(t=0,i=0,e=0,h=0,s=!1,r){this.oversized=!1,this._rot=!1,this._allowRotation=void 0,this._dirty=0,this._width=t,this._height=i,this._x=e,this._y=h,this._data={},this._rot=s,this._allowRotation=r}static Collide(t,i){return t.collide(i)}static Contain(t,i){return t.contain(i)}area(){return this.width*this.height}collide(t){return t.x<this.x+this.width&&t.x+t.width>this.x&&t.y<this.y+this.height&&t.y+t.height>this.y}contain(t){return t.x>=this.x&&t.y>=this.y&&t.x+t.width<=this.x+this.width&&t.y+t.height<=this.y+this.height}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this._dirty++)}get height(){return this._height}set height(t){t!==this._height&&(this._height=t,this._dirty++)}get x(){return this._x}set x(t){t!==this._x&&(this._x=t,this._dirty++)}get y(){return this._y}set y(t){t!==this._y&&(this._y=t,this._dirty++)}get rot(){return this._rot}set rot(t){if(!1!==this._allowRotation&&this._rot!==t){const i=this.width;this.width=this.height,this.height=i,this._rot=t,this._dirty++}}get allowRotation(){return this._allowRotation}set allowRotation(t){this._allowRotation!==t&&(this._allowRotation=t,this._dirty++)}get data(){return this._data}set data(t){null!==t&&t!==this._data&&(this._data=t,"object"==typeof t&&t.hasOwnProperty("allowRotation")&&(this._allowRotation=t.allowRotation),this._dirty++)}get dirty(){return this._dirty>0}setDirty(t=!0){this._dirty=t?this._dirty+1:0}}class s{constructor(){this._dirty=0}get dirty(){return this._dirty>0||this.rects.some((t=>t.dirty))}setDirty(t=!0){if(this._dirty=t?this._dirty+1:0,!t)for(let t of this.rects)t.setDirty&&t.setDirty(!1)}}class r extends s{constructor(t=a,i=a,e=0,s={}){super(),this.maxWidth=t,this.maxHeight=i,this.padding=e,this.freeRects=[],this.rects=[],this.verticalExpand=!1,this.options={smart:!0,pot:!0,square:!0,allowRotation:!1,tag:!1,exclusiveTag:!0,border:0,logic:o.MAX_EDGE},this.options=Object.assign(Object.assign({},this.options),s),this.width=this.options.smart?0:t,this.height=this.options.smart?0:i,this.border=this.options.border?this.options.border:0,this.freeRects.push(new h(this.maxWidth+this.padding-2*this.border,this.maxHeight+this.padding-2*this.border,this.border,this.border)),this.stage=new h(this.width,this.height)}add(...t){let i,e;if(1===t.length){if("object"!=typeof t[0])throw new Error("MacrectsBin.add(): Wrong parameters");e=t[0];let i=e.data&&e.data.tag?e.data.tag:e.tag?e.tag:void 0;if(this.options.tag&&this.options.exclusiveTag&&this.tag!==i)return}else{if(i=t.length>2?t[2]:null,this.options.tag&&this.options.exclusiveTag){if(i&&this.tag!==i.tag)return;if(!i&&this.tag)return}e=new h(t[0],t[1]),e.data=i,e.setDirty(!1)}const s=this.place(e);return s&&this.rects.push(s),s}repack(){let t=[];this.reset(),this.rects.sort(((t,i)=>{const e=Math.max(i.width,i.height)-Math.max(t.width,t.height);return 0===e&&t.hash&&i.hash?t.hash>i.hash?-1:1:e}));for(let i of this.rects)this.place(i)||t.push(i);for(let i of t)this.rects.splice(this.rects.indexOf(i),1);return t.length>0?t:void 0}reset(t=!1,i=!1){t&&(this.data&&delete this.data,this.tag&&delete this.tag,this.rects=[],i&&(this.options={smart:!0,pot:!0,square:!0,allowRotation:!1,tag:!1,border:0})),this.width=this.options.smart?0:this.maxWidth,this.height=this.options.smart?0:this.maxHeight,this.border=this.options.border?this.options.border:0,this.freeRects=[new h(this.maxWidth+this.padding-2*this.border,this.maxHeight+this.padding-2*this.border,this.border,this.border)],this.stage=new h(this.width,this.height),this._dirty=0}clone(){let t=new r(this.maxWidth,this.maxHeight,this.padding,this.options);for(let i of this.rects)t.add(i);return t}place(t){let i,e,s=t.data&&t.data.tag?t.data.tag:t.tag?t.tag:void 0;if(!this.options.tag||!this.options.exclusiveTag||this.tag===s){if(e=t.hasOwnProperty("_allowRotation")&&void 0!==t.allowRotation?t.allowRotation:this.options.allowRotation,i=this.findNode(t.width+this.padding,t.height+this.padding,e),i){this.updateBinSize(i);let e=this.freeRects.length,h=0;for(;h<e;)this.splitNode(this.freeRects[h],i)&&(this.freeRects.splice(h,1),e--,h--),h++;return this.pruneFreeList(),this.verticalExpand=this.width>this.height,t.x=i.x,t.y=i.y,void 0===t.rot&&(t.rot=!1),t.rot=i.rot?!t.rot:t.rot,this._dirty++,t}if(this.verticalExpand){if(this.updateBinSize(new h(t.width+this.padding,t.height+this.padding,this.border,this.height+this.padding-this.border))||this.updateBinSize(new h(t.width+this.padding,t.height+this.padding,this.width+this.padding-this.border,this.border)))return this.place(t)}else if(this.updateBinSize(new h(t.width+this.padding,t.height+this.padding,this.width+this.padding-this.border,this.border))||this.updateBinSize(new h(t.width+this.padding,t.height+this.padding,this.border,this.height+this.padding-this.border)))return this.place(t)}}findNode(t,i,e){let s,r,n,a=Number.MAX_VALUE;for(let d in this.freeRects)r=this.freeRects[d],r.width>=t&&r.height>=i&&(s=this.options.logic===o.MAX_AREA?r.width*r.height-t*i:Math.min(r.width-t,r.height-i),s<a&&(n=new h(t,i,r.x,r.y),a=s)),e&&r.width>=i&&r.height>=t&&(s=this.options.logic===o.MAX_AREA?r.width*r.height-i*t:Math.min(r.height-t,r.width-i),s<a&&(n=new h(i,t,r.x,r.y,!0),a=s));return n}splitNode(t,i){if(!t.collide(i))return!1;if(i.x<t.x+t.width&&i.x+i.width>t.x){if(i.y>t.y&&i.y<t.y+t.height){let e=new h(t.width,i.y-t.y,t.x,t.y);this.freeRects.push(e)}if(i.y+i.height<t.y+t.height){let e=new h(t.width,t.y+t.height-(i.y+i.height),t.x,i.y+i.height);this.freeRects.push(e)}}if(i.y<t.y+t.height&&i.y+i.height>t.y){if(i.x>t.x&&i.x<t.x+t.width){let e=new h(i.x-t.x,t.height,t.x,t.y);this.freeRects.push(e)}if(i.x+i.width<t.x+t.width){let e=new h(t.x+t.width-(i.x+i.width),t.height,i.x+i.width,t.y);this.freeRects.push(e)}}return!0}pruneFreeList(){let t=0,i=0,e=this.freeRects.length;for(;t<e;){i=t+1;let h=this.freeRects[t];for(;i<e;){let s=this.freeRects[i];if(s.contain(h)){this.freeRects.splice(t,1),t--,e--;break}h.contain(s)&&(this.freeRects.splice(i,1),i--,e--),i++}t++}}updateBinSize(t){if(!this.options.smart)return!1;if(this.stage.contain(t))return!1;let i=Math.max(this.width,t.x+t.width-this.padding+this.border),e=Math.max(this.height,t.y+t.height-this.padding+this.border);if(this.options.allowRotation){const h=Math.max(this.width,t.x+t.height-this.padding+this.border),s=Math.max(this.height,t.y+t.width-this.padding+this.border);h*s<i*e&&(i=h,e=s)}return this.options.pot&&(i=Math.pow(2,Math.ceil(Math.log(i)*Math.LOG2E)),e=Math.pow(2,Math.ceil(Math.log(e)*Math.LOG2E))),this.options.square&&(i=e=Math.max(i,e)),!(i>this.maxWidth+this.padding||e>this.maxHeight+this.padding)&&(this.expandFreeRects(i+this.padding,e+this.padding),this.width=this.stage.width=i,this.height=this.stage.height=e,!0)}expandFreeRects(t,i){this.freeRects.forEach(((e,h)=>{e.x+e.width>=Math.min(this.width+this.padding-this.border,t)&&(e.width=t-e.x-this.border),e.y+e.height>=Math.min(this.height+this.padding-this.border,i)&&(e.height=i-e.y-this.border)}),this),this.freeRects.push(new h(t-this.width-this.padding,i-2*this.border,this.width+this.padding-this.border,this.border)),this.freeRects.push(new h(t-2*this.border,i-this.height-this.padding,this.border,this.height+this.padding-this.border)),this.freeRects=this.freeRects.filter((t=>!(t.width<=0||t.height<=0||t.x<this.border||t.y<this.border))),this.pruneFreeList()}}class n extends s{constructor(...t){if(super(),this.rects=[],1===t.length){if("object"!=typeof t[0])throw new Error("OversizedElementBin: Wrong parameters");const i=t[0];this.rects=[i],this.width=i.width,this.height=i.height,this.data=i.data,i.oversized=!0}else{this.width=t[0],this.height=t[1],this.data=t.length>2?t[2]:null;const i=new h(this.width,this.height);i.oversized=!0,i.data=this.data,this.rects.push(i)}this.freeRects=[],this.maxWidth=this.width,this.maxHeight=this.height,this.options={smart:!1,pot:!1,square:!1}}add(){}reset(t=!1){}repack(){}clone(){return new n(this.rects[0])}}const a=4096;var o;!function(t){t[t.MAX_AREA=0]="MAX_AREA",t[t.MAX_EDGE=1]="MAX_EDGE"}(o||(o={}));class d{constructor(t=a,i=a,e=0,h={}){this.width=t,this.height=i,this.padding=e,this.options={smart:!0,pot:!0,square:!1,allowRotation:!1,tag:!1,exclusiveTag:!0,border:0,logic:o.MAX_EDGE},this._currentBinIndex=0,this.bins=[],this.options=Object.assign(Object.assign({},this.options),h)}add(...t){if(1===t.length){if("object"!=typeof t[0])throw new Error("MacrectsPacker.add(): Wrong parameters");const i=t[0];if(i.width>this.width||i.height>this.height)this.bins.push(new n(i));else{if(!this.bins.slice(this._currentBinIndex).find((t=>void 0!==t.add(i)))){let t=new r(this.width,this.height,this.padding,this.options),e=i.data&&i.data.tag?i.data.tag:i.tag?i.tag:void 0;this.options.tag&&e&&(t.tag=e),t.add(i),this.bins.push(t)}}return i}{const i=new h(t[0],t[1]);if(t.length>2&&(i.data=t[2]),i.width>this.width||i.height>this.height)this.bins.push(new n(i));else{if(!this.bins.slice(this._currentBinIndex).find((t=>void 0!==t.add(i)))){let t=new r(this.width,this.height,this.padding,this.options);this.options.tag&&i.data.tag&&(t.tag=i.data.tag),t.add(i),this.bins.push(t)}}return i}}addArray(t){if(!this.options.tag||this.options.exclusiveTag)this.sort(t,this.options.logic).forEach((t=>this.add(t)));else{if(0===t.length)return;let i;t.sort(((t,i)=>{const e=t.data&&t.data.tag?t.data.tag:t.tag?t.tag:void 0,h=i.data&&i.data.tag?i.data.tag:i.tag?i.tag:void 0;return void 0===h?-1:void 0===e?1:h>e?-1:1}));let e=0;if(!this.bins.slice(this._currentBinIndex).find((h=>{let s=h.clone();for(let r=e;r<t.length;r++){const n=t[r],a=n.data&&n.data.tag?n.data.tag:n.tag?n.tag:void 0;if(0===r&&(i=a),a!==i)return i=a,this.sort(t.slice(e,r),this.options.logic).forEach((t=>h.add(t))),e=r,this.addArray(t.slice(r)),!0;if(void 0===a)return this.sort(t.slice(r),this.options.logic).forEach((t=>this.add(t))),e=t.length,!0;if(void 0===s.add(n))return!1}return this.sort(t.slice(e),this.options.logic).forEach((t=>h.add(t))),!0}))){const i=t[e],h=new r(this.width,this.height,this.padding,this.options),s=i.data&&i.data.tag?i.data.tag:i.tag?i.tag:void 0;this.options.tag&&this.options.exclusiveTag&&s&&(h.tag=s),this.bins.push(h),this.addArray(t.slice(e))}}}reset(){this.bins=[],this._currentBinIndex=0}repack(t=!0){if(t){let t=[];for(let i of this.bins)if(i.dirty){let e=i.repack();e&&t.push(...e)}return void this.addArray(t)}if(!this.dirty)return;const i=this.rects;this.reset(),this.addArray(i)}next(){return this._currentBinIndex=this.bins.length,this._currentBinIndex}load(t){t.forEach(((t,i)=>{if(t.maxWidth>this.width||t.maxHeight>this.height)this.bins.push(new n(t.width,t.height,{}));else{let e=new r(this.width,this.height,this.padding,t.options);e.freeRects.splice(0),t.freeRects.forEach(((t,i)=>{e.freeRects.push(new h(t.width,t.height,t.x,t.y))})),e.width=t.width,e.height=t.height,t.tag&&(e.tag=t.tag),this.bins[i]=e}}),this)}save(){let t=[];return this.bins.forEach((i=>{let e={width:i.width,height:i.height,maxWidth:i.maxWidth,maxHeight:i.maxHeight,freeRects:[],rects:[],options:i.options};i.tag&&(e=Object.assign(Object.assign({},e),{tag:i.tag})),i.freeRects.forEach((t=>{e.freeRects.push({x:t.x,y:t.y,width:t.width,height:t.height})})),t.push(e)})),t}sort(t,i=o.MAX_EDGE){return t.slice().sort(((t,e)=>{const h=i===o.MAX_EDGE?Math.max(e.width,e.height)-Math.max(t.width,t.height):e.width*e.height-t.width*t.height;return 0===h&&t.hash&&e.hash?t.hash>e.hash?-1:1:h}))}get currentBinIndex(){return this._currentBinIndex}get dirty(){return this.bins.some((t=>t.dirty))}get rects(){let t=[];for(let i of this.bins)t.push(...i.rects);return t}}}}]);